<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Soure — Game</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="game-page">
    <header class="game-topbar hud-top-bar">
      <div class="game-topbar-left">
        <a href="/" class="game-back-btn" aria-label="Back to menu">← Back to Menu</a>
        <span class="game-topbar-sep" aria-hidden="true">|</span>
        <span id="gameTopbarGameId" class="game-topbar-gameid">Game ID: —</span>
        <span id="gameTimer" class="game-timer hidden" aria-live="polite">Time: 00:00</span>
      </div>
      <div id="resourceBar" class="resource-bar hidden" aria-label="My resources"></div>
    </header>

    <div class="game-container">
    <section class="game-lobby" id="lobbySection" aria-label="Lobby">
      <div id="gameEndedInactive" class="game-ended-inactive hidden" role="status">
        <p class="game-ended-msg">Game ended (inactive — no dice roll within 2 minutes).</p>
        <a href="/" class="btn btn-primary">Back to menu</a>
      </div>
      <div class="game-lobby-create lobby-toolbar" id="lobbyCreateJoin">
        <label for="joinInput" class="lobby-toolbar-label">Game ID</label>
        <input type="text" class="input lobby-toolbar-input" id="joinInput" placeholder="Enter Game ID" aria-label="Game ID to join" />
        <button type="button" class="btn btn-primary" id="createBtn" aria-label="Create a new game">Create Game</button>
        <button type="button" class="btn" id="joinBtn" aria-label="Join game">Join Game</button>
      </div>
      <div class="game-lobby-room hidden" id="lobbyRoom">
        <div class="game-lobby-slots" id="lobbyPlayers" role="list" aria-label="Player slots"></div>
        <div class="game-lobby-start-wrap" id="lobbyStartBtn">
          <button type="button" class="btn btn-lobby-start" id="startBtnLobby" aria-label="Start the game">Start Game</button>
        </div>
      </div>
    </section>

    <section class="game-section hidden" id="gameInfoSection" aria-label="Game view">
      <div class="game-hud">
        <div class="hud-body game-play-area">
          <aside class="hud-left" aria-label="Players">
            <div class="players-list" id="playersList"></div>
          </aside>

          <main class="hud-center" aria-label="Board">
            <div id="boardContainer" class="board-container">
              <div class="soure-board" id="soureBoard" role="img" aria-label="Game board">
                <div id="corner-tl" class="corner corner-tl" aria-hidden="true"></div>
                <div id="corner-tr" class="corner corner-tr" aria-hidden="true"></div>
                <div id="corner-bl" class="corner corner-bl" aria-hidden="true"></div>
                <div id="corner-br" class="corner corner-br" aria-hidden="true"></div>

                <div class="track top" id="trackTop"></div>
                <div class="track right" id="trackRight"></div>
                <div class="track bottom" id="trackBottom"></div>
                <div class="track left" id="trackLeft"></div>

                <div class="board-center" id="boardCenter"></div>
                <div id="tokenLayer" class="token-layer" aria-hidden="true"></div>
              </div>
            </div>
          </main>

          <aside class="hud-right test-class" aria-label="Dice and actions">
            <div class="dice-panel">
              <div id="diceContainer" class="dice-container-inline">
                <div class="dice-card dice-slot" id="dice1"><img id="dice1Img" alt="" class="dice-img"/><span id="dice1Text" class="dice-text">?</span></div>
                <div class="dice-card dice-slot" id="dice2"><img id="dice2Img" alt="" class="dice-img"/><span id="dice2Text" class="dice-text">?</span></div>
              </div>
              <div id="diceResult" class="dice-result-inline hidden"></div>
              <div class="game-actions-inline">
                <button type="button" class="btn btn-primary hidden" id="rollBtn">Roll Dice</button>
                <button type="button" class="btn hidden" id="endTurnBtn">End Turn</button>
                <button type="button" class="btn hidden" id="blockTileBtn">Block Tile</button>
              </div>
            </div>
          </aside>
        </div>
      </div>

      <div id="breachPanel" class="breach-panel hidden">
        <h3>Breach! Choose a tile to block:</h3>
        <div id="tileSelection" class="tile-selection"></div>
      </div>

      <div id="buildingPanel" class="building-panel hidden">
        <h3>Place Building</h3>
        <div class="building-options">
          <button type="button" class="btn" data-building="outpost">Outpost (1 stone, 1 water) - 1 DP</button>
          <button type="button" class="btn" data-building="bastion">Bastion (1 iron, 1 food) - +1 Defense</button>
        </div>
        <div id="buildingTileSelection" class="tile-selection building-tile-selection hidden" aria-label="Choose a tile to place building"></div>
        <p class="building-hint">Select a building type, then choose a tile from the list.</p>
        <p class="building-hint" style="font-size: 0.75rem; margin-top: 4px;">Upgrades: Outpost → Citadel (2 stone, 2 food) → Capital (3 stone, 3 iron, 2 gold)</p>
      </div>
    </section>

    <section class="game-section hidden" id="logSection" aria-label="Event log">
      <h3>Event log</h3>
      <div class="event-log" id="eventLog"></div>
    </section>

    <div class="error-msg hidden" id="errorEl" role="alert"></div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/track.js"></script>
  <script src="/game.js"></script>
</body>
</html>
